# 命令行参数

木兰在启动时将扫描提供的命令行参数用于获取各种设置信息和进入不同的模式。

## 命令行调用形式

可以对木兰按以下形式发起命令行调用：

```
木兰 [选项] [源码文件] [其他参数]

选项：
 --版本,         -版   显示版本
 --帮助          -助   显示帮助信息
 --反编译        -反   反编译 Python 代码
 --交互          -交   以交互式审查脚本
 --python变木兰, -兰   将 Python 源码转换为木兰源码
 --木兰变python  -p    将木兰源码转换为 Python 源码
 --生成字节码     -码   将木兰源码转换为 donsok 字节码 (实验性)
 --调试          -调   使用 Pdb 环境调试代码
 --显示回溯       -溯   显示异常的栈回溯信息
 --语法树,       -树   语法树信息
 --执行代码=<代码> -执  执行来自命令行参数的代码
```

下面是原始木兰的命令行帮助文本：

```
usage: ulang-0.2.2.exe [-apbcidsDth] input_file
Options and arguments:
 --dump-ast,        -a   dump ast info
 --dump-python,     -p   dump python source code
 --dump-blockly,    -b   dump blockly xml (experimental)
 --dump-bytecode,   -c   dump donsok bytecode (experimental)
 --python-to-ulang, -s   convert python to ulang
 --debug,           -D   debug with Pdb (experimental)
 --interact,        -i   inspect interactively after running script
 --disassemble,     -d   disassemble the python bytecode
 --exec-code=<code> -e   run code from cli argument
 --show-backtrace,  -t   show backtrace for errors
 --version,         -v   show the version
 --help,            -h   show this message
```



### 其他参数

其他参数是用户传递给脚本文件的参数。开发者可以通过导入 `sys` 模块的 `argv` 成员访问到其他参数。

例如下面的程序：
```
// 打印命令行参数.ul

using argv in sys

print(sys)
```

```
$ 木兰 ./打印命令行参数 a b c 1 2 3
[木兰, ./打印命令行参数.ul, a, b, c, 1, 2, 3]
```

`sys.argv` 获取到的结果是 [`木兰执行文件名`, `脚本名`, `参数1`, `参数2`, ..., `参数n`]

其中脚本名以后的部分，就是提供给脚本的参数，脚本程序可以根据这些参数，执行不同的功能。



## 命令行选项介绍

### --版本 (-版)

显示当前木兰的版本信息

### --帮助 (-助)

显示帮助信息

### --python变木兰 (-兰)

将用户提供的 **Python代码文件** 转换成等效的木兰代码并输出。

例如有如下的代码：
```python
# code1.py
for i in range(10):
	print(i ** 2)
```

```
$ 木兰 --python变木兰 ./code1.py
/* 本文件由命令 `木兰 -兰 ` 自动生成. */

for i in range(10) {
  println(i * 2)
}
```

### --语法树 (-树)

打印给定木兰源码文件的语法树。

例如有如下代码：

```
// code1.ul
for i in range(10) {
  println(i * 2)
}
```

```
$ 木兰 --语法树 code1.ul
Module(body=[For(target=Name(id='i', ctx=Store(), lineno=1, col_offset=5), iter=Call(func=Name(id='range', ctx=Load(), lineno=1, col_offset=10), args=[Num(n=10, lineno=1, col_offset=16)], keywords=[], lineno=1, col_offset=10), body=[Expr(value=Call(func=Name(id='println', ctx=Load(), lineno=2, col_offset=3), args=[BinOp(left=Name(id='i', ctx=Load(), lineno=2, col_offset=11), op=Mult(), right=Num(n=2, lineno=2, col_offset=15), lineno=2, col_offset=11)], keywords=[], lineno=2, col_offset=3), lineno=2, col_offset=3)], orelse=[], lineno=1, col_offset=1)])
```

### --生成字节码 (-码)

将木兰源码转换为 *donsok* 字节码 (实验性功能)，**由于 pygen未实现亦未找到第三方库，该选项暂时不可用**