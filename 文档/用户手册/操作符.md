## 重载操作符语法范式

此语法用来重载自定义类型的操作符，重载会实现相应的功能，[示例](../../测试/类型/操作符/定义操作符.ul)。
除实现原操作符功能外，还可以修改为其它功能，比如把自类型变量的a加3 `a+3` 的语义，变成a中某属性的3次幂。
基础类型如`int str`等不能重载操作符，但可以在扩展类中重载：

```
type P {
    operator + (a) {
        return str(self) + str(a) + '啊'
    }

    {}
}
a = P("你")
b = P("好")
print(a+b)
```

```
// 示例样式
type 某类型名 {
    
    operator 二元操作符 (参数) {
        // 实现部分
        return ...
    }

    operator 一元操作符 {
        // 实现部分
        return ...
    }

    operator - {
        // 实现部分
        return ...
    }
}
```

支持重载的操作符， 完整测试用例[语法说明](../语法说明.md) 的 “二元操作符”与 “一元操作符” 部分。

### 操作符“[]”重载问题
重载[]有单参数和双参数方式，以下为两种方式测试结果。

双参数：
```
type a {
    func $a(){ self.items = [1,2,3] }
    /*operator [ ] (a) { return self.items[a] } */
    operator [ ] (a, b) {
        self.items[a] = b
        return self.items
    }
}
ab = a()
ab[1] = 10
print(ab.items)
// print(ab[1])
```
执行结果：
![双参数](https://foruda.gitee.com/images/1669336879890751481/a43fbc8b_1217471.png "双参数")

单参数：
```
type a {
    func $a(){ self.items = [1,2,3] }
    operator [ ] (a) { return self.items[a] }
    /*operator [ ] (a, b) {
        self.items[a] = b
        return self.items
    } */
}
ab = a()
//ab[1] = 10
//print(ab.items)
print(ab[1])
```
执行结果：
![单参数](https://foruda.gitee.com/images/1669336936466269669/f9ff4cd5_1217471.png "单参数")

双参数时调用单参数功能报错：
```
type a {
    func $a(){ self.items = [1,2,3] }
    /*operator [ ] (a) { return self.items[a] } */
    operator [ ] (a, b) {
        self.items[a] = b
        return self.items
    }
}
ab = a()
ab[1] = 10
print(ab.items)
print(ab[1])
```
执行结果：
![报错](https://foruda.gitee.com/images/1669337012952372181/04d72aa2_1217471.png "报错")

重载方式，单操作符为：
`operator [] (序号) {...}`
含义为取第“序号”项的值。

双参数为： 
`operator [] (序号, 值) {...}`
含义为设置“序号”项的值为“值”。

### 操作符“减”的问题
当做减运算时使用二元操作符方式重载：
`operator - (参数) {...}`

当做为负号运算符重载时，使用无操作数方式重载：
`operator - {...}`

另外做为负时不能使用 `operator - () {...}`这种方式重载，
原因待研究。把小括号优先级放点点之后，使用当前语法会报语法错误'没认出这个词 ")" '，与原始木兰行为相同；如果将其置于最后，重载负号测试用例运行无误，但是重载减运算操作符会报错。
